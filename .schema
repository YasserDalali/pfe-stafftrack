/* Here is the global structure schema for all your tables in the public schema:
 */
-- 1. attendance Table
CREATE TABLE public.attendance (
  id bigint GENERATED ALWAYS AS IDENTITY NOT NULL,
  employee_id bigint NOT NULL,
  status text NULL,
  checkdate timestamp with time zone NOT NULL,
  lateness interval NULL,
  CONSTRAINT attendance_pkey PRIMARY KEY (id),
  CONSTRAINT fk_employee FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
  CONSTRAINT attendance_status_check CHECK ((status = ANY (ARRAY['present'::text, 'absent'::text]))
) TABLESPACE pg_default;

CREATE INDEX IF NOT EXISTS idx_employee_id ON public.attendance USING btree (employee_id) TABLESPACE pg_default;


-- 2. employees Table
CREATE TABLE public.employees (
  id bigint GENERATED BY DEFAULT AS IDENTITY NOT NULL,
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  name character varying NOT NULL,
  hire_date date NULL,
  leave_balance bigint NULL,
  position character varying NULL,
  departement character varying NULL,
  monthly_salary numeric NULL,
  weekly_work_hours double precision NULL,
  satisfaction_rate bigint NULL,
  notes text NULL,
  email text NULL,
  avatar_url text NULL,
  CONSTRAINT employees_pkey PRIMARY KEY (id),
  CONSTRAINT employees_email_key UNIQUE (email),
  CONSTRAINT employees_email_check CHECK ((email ~ '^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,}$'::text))
) TABLESPACE pg_default;

-- 3. leaves Table
CREATE TABLE public.leaves (
  id bigint GENERATED BY DEFAULT AS IDENTITY NOT NULL,
  employee_id bigint NULL,
  type character varying NULL,
  start_date date NULL,
  end_date date NULL,
  duration integer NULL,
  status character varying NULL DEFAULT 'pending'::character varying,
  reason text NULL,
  CONSTRAINT leaves_pkey PRIMARY KEY (id),
  CONSTRAINT leaves_employee_id_fkey FOREIGN KEY (employee_id) REFERENCES employees(id) ON UPDATE CASCADE
) TABLESPACE pg_default;

/* Summary of Tables
attendance: Tracks employee attendance with fields for employee ID, status, check date, and lateness.
employees: Stores employee details including name, hire date, position, salary, and email.
leaves: Manages employee leave requests with fields for type, start and end dates, duration, and status.
This structure provides a comprehensive overview of your current tables and their relationships. */